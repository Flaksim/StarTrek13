//NOTE TO SELF:
//Make destroy do something, otherwise it seriously glitches out the pilot!

/area/ // fuck your idea of shoving everything into one file
	var/current_overmap = "none" // current map an area is on.

var/global/list/overmap_objects = list()
var/global/list/global_ship_list = list()

/area/overmap
	name = "Sector 417542 (Federation space)"
	dynamic_lighting = DYNAMIC_LIGHTING_DISABLED
	flags = NONE
	requires_power = FALSE
	var/jumpgate_position = 1 //Change me! whenever you add a new system, incriment this by 1!
	ambientsounds = list('StarTrek13/sound/ambience/bsgtheme1.ogg','StarTrek13/sound/ambience/bsgtheme2.ogg','StarTrek13/sound/ambience/trektheme1.ogg','StarTrek13/sound/ambience/trektheme2.ogg','StarTrek13/sound/ambience/masstheme1.ogg','StarTrek13/sound/ambience/bsgtheme3.ogg','StarTrek13/sound/ambience/interstellar.ogg')

/area/overmap/s2
	name = "Sector 417543 (Neutral zone)"

/area/overmap/Entered(A)
	set waitfor = FALSE
	if(!isliving(A))
		return

	var/mob/living/L = A
	if(!L.ckey)
		return

	// Ambience goes down here -- make sure to list each area separately for ease of adding things in later, thanks! Note: areas adjacent to each other should have the same sounds to prevent cutoff when possible.- LastyScratch
	if(L.client && !L.client.ambience_playing && L.client.prefs.toggles & SOUND_SHIP_AMBIENCE)
		L.client.ambience_playing = 1

	if(!(L.client && (L.client.prefs.toggles & SOUND_AMBIENCE)))
		return //General ambience check is below the ship ambience so one can play without the other

	if(prob(100))
		var/sound = pick(ambientsounds)

		if(!L.client.played)
			SEND_SOUND(L, sound(sound, repeat = 0, wait = 0, volume = 25, channel = CHANNEL_AMBIENCE))
			L.client.played = TRUE
			addtimer(CALLBACK(L.client, /client/proc/ResetAmbiencePlayed), 800)

/area/overmap/hyperspace
	name = "hyperspace"
	parallax_movedir = 8

/area/overmap/system
	name = "Sol (NT)"
	jumpgate_position = 2
	music = 'StarTrek13/sound/ambience/bsgtheme2.ogg'

/area/overmap/system/z2
	name = "Amann" //Test
	jumpgate_position = 3

/area/overmap/system/z3
	name = "Reb'ase" //Test
	jumpgate_position = 4

/area/overmap/system/z4
	name = "Neutral Zone (Romulan)" //Test
	jumpgate_position = 5

/area/overmap/system/z5
	name = "Ursa minor (BORG)" //Test
	jumpgate_position = 6


/area/overmap/system/z6
	name = "Ursa major (FED)" //Test
	jumpgate_position = 7
	music = 'StarTrek13/sound/ambience/trektheme1.ogg'

/obj/structure/space_object
	icon = 'StarTrek13/icons/trek/space_objects.dmi'
	name = "Sun"
	desc = "Don't get too close to it...."
	anchored = 1
	can_be_unanchored = 0
	icon_state = "sun"
	layer = 2

/obj/structure/space_object/supernova
	name = "Supernova"
	desc = "A star that has gone nova."
	icon_state = "supernova"

/obj/structure/space_object/earth
	name = "Earth"
	desc = "An utterly uninteresting little blue green planet situated in the unfashionable end of the western spiral arm of the galaxy."
	icon_state = "earth"

/obj/structure/space_object/rocky
	name = "Class D planetoid"
	desc = "A lifeless chunk of rock"
	icon_state = "rockyplanet"


/obj/structure/space_object/planet
	name = "Uncharted planet"
	desc = "A planet whose composition is unknown."
	icon_state = "1"


/obj/structure/space_object/nebula
	name = "Nebula"
	desc = "I wouldn't fly into that if I were you."
	icon_state = "nebula"

/obj/structure/overmap/lavaland
	name = "VY Canis Minoris XXIV"
	desc = "A lizard infested infernal shithole of a rock. Why the hell would anyone but /tg/ EVER want to set foot on it?"
	icon_state = "lavaland"
	icon = 'StarTrek13/icons/trek/space_objects.dmi'
	spawn_name = "lavaland_spawn"
	layer = 2
	can_move = FALSE
	max_health = 1000000
	health = 1000000

/obj/structure/space_object/simulated
	name = "star"
	desc = "Flying into this always end up with horridly amazing fun!"
	var/cooldown = 30 //once every three seconds, to prevent it from just spamming the shit out of it
	var/time_elapse
	pixel_x = -128
	pixel_y = -128

/obj/structure/space_object/simulated/New()
	..()
	START_PROCESSING(SSobj, src)

/obj/structure/space_object/simulated/process()
	if(time_elapse > world.time)
		return

	for(var/obj/structure/overmap/S in orange(src, 6))
		if(!S.shields_active)
			to_chat(S.pilot, "Warning: hull temperature rising.")
			var/turf/open/floor/picked_turf = pick(get_area_turfs(S.linked_ship))
			picked_turf.atmos_spawn_air("plasma=60;TEMP=3000")
			time_elapse = world.time + cooldown

/area/ship/sov_backup
	name = "USS Herald Of Free Enterprise"

/area/ship/rom_backup
	name = "Aurelius"